using XLIB_COMMON.Repo;
using MDL_iLOGIS.ComponentConfig._Interfaces;
using System.Collections.Generic;
using System.Linq;
using XLIB_COMMON.Interface;
using MDL_iLOGIS.ComponentConfig.Entities;
using MDL_iLOGIS.ComponentWMS.Entities;
using MDLX_MASTERDATA.Entities;
using System.Net;
using Newtonsoft.Json.Linq;
using System;
using MDL_iLOGIS.ComponentWMS.Models;
using MDL_iLOGIS.ComponentWMS._Interfaces;

namespace MDL_iLOGIS.ComponentWMS.Repos
{
    public class StockUnitRepo_FSDS_PLV : ILocataionManager
    {
        public bool IsFake { get; set; }

        public StockUnitRepo_FSDS_PLV()
        {
            IsFake = false;
        }

        public List<ApiLocation> GetLocationsOfItem(string itemCode, int pageSize = 10, int pageNumber = 0)
        {
            string json = GetLocationsOfItemFSDS_API(itemCode, pageSize, pageNumber);
            if (json == "Problem")
            {
                return null;
            }
            else
            {
                return ParseFSDSItemLocationsData(json);
            }
        }
        public static string GetLocationsOfItemFSDS_API(string itemCode, int pageSize = 10, int pageNumber = 0)
        {
            //if (pageSize != 0)
            //{
            //    return GetLocationsOfItemFSDS_API_FAKE();
            //}
            var link = "http://plws4036:89/FSDS/FSDS/GetLocations?" +
                "itemCode=" + itemCode + "&" +
                "pageSize=" + pageSize + "&" +
                "pageNumber=" + pageNumber;

            //var link = "http://eual0bl1.biz.electrolux.com:9146/warehouse-microservice/plants/PLV/warehouses/171/locations?" +
            //    "itemCode=" + itemCode + "&" +
            //    "size=" + pageSize + "&" +
            //    "page=" + pageNumber;

            WebClient wc = new WebClient();
            string rawJson;
            try
            {
                rawJson = wc.DownloadString(link);
            }
            catch
            {
                return "Problem ";
            }

            //Tylko dla Api przez PLWS4036
            rawJson = rawJson.Replace("\\","");
            rawJson = rawJson.Substring(1);
            rawJson = rawJson.Substring(0, rawJson.Length - 1);

            return rawJson;
        }
        public static string GetLocationsOfItemFSDS_API_FAKE()
        {
            string data = "{\"content\":[{\"concurrencyVersion\":4,\"tenantId\":\"PLV\",\"creator\":\"PBMPS07\",\"instantCreated\":\"1900 - 01 - 01T00: 01:01.000Z\",\"lastModifier\":\"szkudjak\",\"instantChanged\":\"2019 - 08 - 08T14: 27:38.782Z\",\"id\":232756,\"cell\":\"20052\",\"subCell\":\"006\",\"warehouseLocationCodeComplete\":\"20052006\",\"warehouseLocationItemCode\":\"A00309111\",\"item\":{\"concurrencyVersion\":0,\"tenantId\":null,\"creator\":null,\"instantCreated\":null,\"lastModifier\":null,\"instantChanged\":null,\"id\":\"PLVcom.electrolux.fsds.commons.ddd.valueobject.masterdata.ItemCode@6489ec91\",\"plantCode\":\"PLV\",\"itemCode\":\"A00309111\",\"itemType\":\"50\",\"description\":\"CONTROL PANEL ASSEMBLY        \",\"explosionFlag\":\"1\",\"plannerCode\":\"11012\",\"buyerCode\":\"100A\",\"generalLedgerClassCode\":\"114\",\"managementUnitOfMeasureCode\":\"01\",\"pickListFlag\":\"1\",\"pickListElab\":\"T\",\"pickListPrecDay\":\"1\",\"pickListGroupDay\":\"1\",\"locationPickFrequency\":\"0\",\"locationManagementType\":\"0\",\"stocklocatn\":\"\",\"supplyMethod\":\"T\",\"consumptionPolicy\":\"0000\",\"traceability\":\"N\",\"reqspecattncode\":\"22\",\"drawno\":\"\",\"unitOfMeasure\":null},\"warehouseCode\":\"00084\",\"batchList\":[],\"physicalFlag\":\"Y\",\"reserFlag\":null,\"blockInformation\":{\"blockflag\":\"N\",\"blockReasn\":null,\"blockuser\":null,\"blockdate\":\"1900 - 01 - 01T00: 01:01.000Z\",\"unblockuser\":null,\"unblockdate\":\"0000 - 12 - 30T00: 01:01.000Z\"},\"inventoryInformation\":{\"invntryflag\":\"N\",\"invntryqty\":0.00,\"invntrydate\":\"1900 - 01 - 01T00: 01:01.000Z\",\"invntryuser\":null,\"invntrycnt\":0},\"loadUnloadStockInformation\":{\"loadqty\":0.00,\"unloadqty\":201906.11,\"loaddate\":\"2019 - 08 - 07T16: 32:21.882Z\",\"unloaddate\":\"2019 - 08 - 07T10: 50:54.537Z\",\"loadqtytot\":231.00,\"unloadqtytot\":287.00},\"stockStrategy\":null,\"stockval\":21.00,\"inpicklistqty\":21.00,\"stockvalTotal\":21.00,\"inpicklistqtyTotal\":null,\"fiscalWarehouseCode\":\"84911\",\"locpickfreq\":\"0\",\"pickingManagementFlag\":\"P\",\"locatncapty\":0.00,\"warehouseLocationManagementType\":\"0\",\"physical\":true},{\"concurrencyVersion\":4,\"tenantId\":\"PLV\",\"creator\":\"PBMPS07\",\"instantCreated\":\"1900 - 01 - 01T00: 01:01.000Z\",\"lastModifier\":\"szkudjak\",\"instantChanged\":\"2019 - 08 - 08T14: 27:38.782Z\",\"id\":232862,\"cell\":\"20122\",\"subCell\":\"001\",\"warehouseLocationCodeComplete\":\"20122001\",\"warehouseLocationItemCode\":\"A00309111\",\"item\":{\"concurrencyVersion\":0,\"tenantId\":null,\"creator\":null,\"instantCreated\":null,\"lastModifier\":null,\"instantChanged\":null,\"id\":\"PLVcom.electrolux.fsds.commons.ddd.valueobject.masterdata.ItemCode@6489ec91\",\"plantCode\":\"PLV\",\"itemCode\":\"A00309111\",\"itemType\":\"50\",\"description\":\"CONTROL PANEL ASSEMBLY        \",\"explosionFlag\":\"1\",\"plannerCode\":\"11012\",\"buyerCode\":\"100A\",\"generalLedgerClassCode\":\"114\",\"managementUnitOfMeasureCode\":\"01\",\"pickListFlag\":\"1\",\"pickListElab\":\"T\",\"pickListPrecDay\":\"1\",\"pickListGroupDay\":\"1\",\"locationPickFrequency\":\"0\",\"locationManagementType\":\"0\",\"stocklocatn\":\"\",\"supplyMethod\":\"T\",\"consumptionPolicy\":\"0000\",\"traceability\":\"N\",\"reqspecattncode\":\"22\",\"drawno\":\"\",\"unitOfMeasure\":null},\"warehouseCode\":\"00084\",\"batchList\":[],\"physicalFlag\":\"Y\",\"reserFlag\":null,\"blockInformation\":{\"blockflag\":\"N\",\"blockReasn\":null,\"blockuser\":null,\"blockdate\":\"1900 - 01 - 01T00: 01:01.000Z\",\"unblockuser\":null,\"unblockdate\":\"0000 - 12 - 30T00: 01:01.000Z\"},\"inventoryInformation\":{\"invntryflag\":\"N\",\"invntryqty\":0.00,\"invntrydate\":\"1900 - 01 - 01T00: 01:01.000Z\",\"invntryuser\":null,\"invntrycnt\":0},\"loadUnloadStockInformation\":{\"loadqty\":0.00,\"unloadqty\":201906.11,\"loaddate\":\"2019 - 08 - 07T16: 32:21.891Z\",\"unloaddate\":\"2019 - 08 - 07T10: 50:54.583Z\",\"loadqtytot\":174.00,\"unloadqtytot\":220.00},\"stockStrategy\":null,\"stockval\":21.00,\"inpicklistqty\":21.00,\"stockvalTotal\":21.00,\"inpicklistqtyTotal\":null,\"fiscalWarehouseCode\":\"84911\",\"locpickfreq\":\"0\",\"pickingManagementFlag\":\"P\",\"locatncapty\":0.00,\"warehouseLocationManagementType\":\"0\",\"physical\":true},{\"concurrencyVersion\":7,\"tenantId\":\"PLV\",\"creator\":\"PBMPS07\",\"instantCreated\":\"1900 - 01 - 01T00: 01:01.000Z\",\"lastModifier\":\"paliwane\",\"instantChanged\":\"2019 - 08 - 01T16: 45:46.447Z\",\"id\":234248,\"cell\":\"25101\",\"subCell\":\"000\",\"warehouseLocationCodeComplete\":\"25101000\",\"warehouseLocationItemCode\":\"A00309111\",\"item\":{\"concurrencyVersion\":0,\"tenantId\":null,\"creator\":null,\"instantCreated\":null,\"lastModifier\":null,\"instantChanged\":null,\"id\":\"PLVcom.electrolux.fsds.commons.ddd.valueobject.masterdata.ItemCode@6489ec91\",\"plantCode\":\"PLV\",\"itemCode\":\"A00309111\",\"itemType\":\"50\",\"description\":\"CONTROL PANEL ASSEMBLY        \",\"explosionFlag\":\"1\",\"plannerCode\":\"11012\",\"buyerCode\":\"100A\",\"generalLedgerClassCode\":\"114\",\"managementUnitOfMeasureCode\":\"01\",\"pickListFlag\":\"1\",\"pickListElab\":\"T\",\"pickListPrecDay\":\"1\",\"pickListGroupDay\":\"1\",\"locationPickFrequency\":\"0\",\"locationManagementType\":\"0\",\"stocklocatn\":\"\",\"supplyMethod\":\"T\",\"consumptionPolicy\":\"0000\",\"traceability\":\"N\",\"reqspecattncode\":\"22\",\"drawno\":\"\",\"unitOfMeasure\":null},\"warehouseCode\":\"00084\",\"batchList\":[],\"physicalFlag\":\"Y\",\"reserFlag\":null,\"blockInformation\":{\"blockflag\":\"N\",\"blockReasn\":null,\"blockuser\":null,\"blockdate\":\"1900 - 01 - 01T00: 01:01.000Z\",\"unblockuser\":null,\"unblockdate\":\"0000 - 12 - 30T00: 01:01.000Z\"},\"inventoryInformation\":{\"invntryflag\":\"N\",\"invntryqty\":0.00,\"invntrydate\":\"1900 - 01 - 01T00: 01:01.000Z\",\"invntryuser\":null,\"invntrycnt\":0},\"loadUnloadStockInformation\":{\"loadqty\":0.00,\"unloadqty\":201905.24,\"loaddate\":\"2019 - 08 - 01T16: 45:45.833Z\",\"unloaddate\":\"2019 - 08 - 01T11: 03:26.162Z\",\"loadqtytot\":60.00,\"unloadqtytot\":106.00},\"stockStrategy\":null,\"stockval\":21.00,\"inpicklistqty\":0.00,\"stockvalTotal\":21.00,\"inpicklistqtyTotal\":null,\"fiscalWarehouseCode\":\"84911\",\"locpickfreq\":\"0\",\"pickingManagementFlag\":\"P\",\"locatncapty\":0.00,\"warehouseLocationManagementType\":\"0\",\"physical\":true},{\"concurrencyVersion\":45,\"tenantId\":\"PLV\",\"creator\":\"PBMPS07\",\"instantCreated\":\"1900 - 01 - 01T00: 01:01.000Z\",\"lastModifier\":\"gorecele\",\"instantChanged\":\"2019 - 08 - 08T14: 27:38.784Z\",\"id\":234251,\"cell\":\"25101\",\"subCell\":\"003\",\"warehouseLocationCodeComplete\":\"25101003\",\"warehouseLocationItemCode\":\"A00309111\",\"item\":{\"concurrencyVersion\":0,\"tenantId\":null,\"creator\":null,\"instantCreated\":null,\"lastModifier\":null,\"instantChanged\":null,\"id\":\"PLVcom.electrolux.fsds.commons.ddd.valueobject.masterdata.ItemCode@6489ec91\",\"plantCode\":\"PLV\",\"itemCode\":\"A00309111\",\"itemType\":\"50\",\"description\":\"CONTROL PANEL ASSEMBLY        \",\"explosionFlag\":\"1\",\"plannerCode\":\"11012\",\"buyerCode\":\"100A\",\"generalLedgerClassCode\":\"114\",\"managementUnitOfMeasureCode\":\"01\",\"pickListFlag\":\"1\",\"pickListElab\":\"T\",\"pickListPrecDay\":\"1\",\"pickListGroupDay\":\"1\",\"locationPickFrequency\":\"0\",\"locationManagementType\":\"0\",\"stocklocatn\":\"\",\"supplyMethod\":\"T\",\"consumptionPolicy\":\"0000\",\"traceability\":\"N\",\"reqspecattncode\":\"22\",\"drawno\":\"\",\"unitOfMeasure\":null},\"warehouseCode\":\"00084\",\"batchList\":[],\"physicalFlag\":\"Y\",\"reserFlag\":null,\"blockInformation\":{\"blockflag\":\"N\",\"blockReasn\":null,\"blockuser\":null,\"blockdate\":\"1900 - 01 - 01T00: 01:01.000Z\",\"unblockuser\":null,\"unblockdate\":\"0000 - 12 - 30T00: 01:01.000Z\"},\"inventoryInformation\":{\"invntryflag\":\"N\",\"invntryqty\":0.00,\"invntrydate\":\"1900 - 01 - 01T00: 01:01.000Z\",\"invntryuser\":null,\"invntrycnt\":0},\"loadUnloadStockInformation\":{\"loadqty\":0.00,\"unloadqty\":201906.17,\"loaddate\":\"2019 - 08 - 01T16: 45:45.830Z\",\"unloaddate\":\"2019 - 08 - 05T21: 51:22.565Z\",\"loadqtytot\":110.00,\"unloadqtytot\":156.00},\"stockStrategy\":null,\"stockval\":8.00,\"inpicklistqty\":8.00,\"stockvalTotal\":8.00,\"inpicklistqtyTotal\":null,\"fiscalWarehouseCode\":\"84911\",\"locpickfreq\":\"0\",\"pickingManagementFlag\":\"P\",\"locatncapty\":0.00,\"warehouseLocationManagementType\":\"0\",\"physical\":true},{\"concurrencyVersion\":13,\"tenantId\":\"PLV\",\"creator\":\"PBMPS07\",\"instantCreated\":\"1900 - 01 - 01T00: 01:01.000Z\",\"lastModifier\":\"paliwane\",\"instantChanged\":\"2019 - 08 - 08T14: 29:33.922Z\",\"id\":234487,\"cell\":\"25222\",\"subCell\":\"002\",\"warehouseLocationCodeComplete\":\"25222002\",\"warehouseLocationItemCode\":\"A00309111\",\"item\":{\"concurrencyVersion\":0,\"tenantId\":null,\"creator\":null,\"instantCreated\":null,\"lastModifier\":null,\"instantChanged\":null,\"id\":\"PLVcom.electrolux.fsds.commons.ddd.valueobject.masterdata.ItemCode@6489ec91\",\"plantCode\":\"PLV\",\"itemCode\":\"A00309111\",\"itemType\":\"50\",\"description\":\"CONTROL PANEL ASSEMBLY        \",\"explosionFlag\":\"1\",\"plannerCode\":\"11012\",\"buyerCode\":\"100A\",\"generalLedgerClassCode\":\"114\",\"managementUnitOfMeasureCode\":\"01\",\"pickListFlag\":\"1\",\"pickListElab\":\"T\",\"pickListPrecDay\":\"1\",\"pickListGroupDay\":\"1\",\"locationPickFrequency\":\"0\",\"locationManagementType\":\"0\",\"stocklocatn\":\"\",\"supplyMethod\":\"T\",\"consumptionPolicy\":\"0000\",\"traceability\":\"N\",\"reqspecattncode\":\"22\",\"drawno\":\"\",\"unitOfMeasure\":null},\"warehouseCode\":\"00084\",\"batchList\":[],\"physicalFlag\":\"Y\",\"reserFlag\":null,\"blockInformation\":{\"blockflag\":\"N\",\"blockReasn\":null,\"blockuser\":null,\"blockdate\":\"1900 - 01 - 01T00: 01:01.000Z\",\"unblockuser\":null,\"unblockdate\":\"0000 - 12 - 30T00: 01:01.000Z\"},\"inventoryInformation\":{\"invntryflag\":\"N\",\"invntryqty\":0.00,\"invntrydate\":\"1900 - 01 - 01T00: 01:01.000Z\",\"invntryuser\":null,\"invntrycnt\":0},\"loadUnloadStockInformation\":{\"loadqty\":0.00,\"unloadqty\":201906.14,\"loaddate\":\"2019 - 08 - 01T16: 45:45.806Z\",\"unloaddate\":\"2019 - 08 - 01T11: 13:12.266Z\",\"loadqtytot\":55.00,\"unloadqtytot\":66.00},\"stockStrategy\":null,\"stockval\":21.00,\"inpicklistqty\":18.00,\"stockvalTotal\":21.00,\"inpicklistqtyTotal\":null,\"fiscalWarehouseCode\":\"84911\",\"locpickfreq\":\"0\",\"pickingManagementFlag\":\"P\",\"locatncapty\":0.00,\"warehouseLocationManagementType\":\"0\",\"physical\":true},{\"concurrencyVersion\":40,\"tenantId\":\"PLV\",\"creator\":\"PBMPS07\",\"instantCreated\":\"1900 - 01 - 01T00: 01:01.000Z\",\"lastModifier\":\"gorecele\",\"instantChanged\":\"2019 - 08 - 08T17: 18:11.594Z\",\"id\":234549,\"cell\":\"26012\",\"subCell\":\"006\",\"warehouseLocationCodeComplete\":\"26012006\",\"warehouseLocationItemCode\":\"A00309111\",\"item\":{\"concurrencyVersion\":0,\"tenantId\":null,\"creator\":null,\"instantCreated\":null,\"lastModifier\":null,\"instantChanged\":null,\"id\":\"PLVcom.electrolux.fsds.commons.ddd.valueobject.masterdata.ItemCode@6489ec91\",\"plantCode\":\"PLV\",\"itemCode\":\"A00309111\",\"itemType\":\"50\",\"description\":\"CONTROL PANEL ASSEMBLY        \",\"explosionFlag\":\"1\",\"plannerCode\":\"11012\",\"buyerCode\":\"100A\",\"generalLedgerClassCode\":\"114\",\"managementUnitOfMeasureCode\":\"01\",\"pickListFlag\":\"1\",\"pickListElab\":\"T\",\"pickListPrecDay\":\"1\",\"pickListGroupDay\":\"1\",\"locationPickFrequency\":\"0\",\"locationManagementType\":\"0\",\"stocklocatn\":\"\",\"supplyMethod\":\"T\",\"consumptionPolicy\":\"0000\",\"traceability\":\"N\",\"reqspecattncode\":\"22\",\"drawno\":\"\",\"unitOfMeasure\":null},\"warehouseCode\":\"00084\",\"batchList\":[],\"physicalFlag\":\"Y\",\"reserFlag\":null,\"blockInformation\":{\"blockflag\":\"N\",\"blockReasn\":null,\"blockuser\":null,\"blockdate\":\"1900 - 01 - 01T00: 01:01.000Z\",\"unblockuser\":null,\"unblockdate\":\"0000 - 12 - 30T00: 01:01.000Z\"},\"inventoryInformation\":{\"invntryflag\":\"N\",\"invntryqty\":0.00,\"invntrydate\":\"1900 - 01 - 01T00: 01:01.000Z\",\"invntryuser\":null,\"invntrycnt\":0},\"loadUnloadStockInformation\":{\"loadqty\":0.00,\"unloadqty\":201906.14,\"loaddate\":\"2019 - 08 - 01T16: 45:45.827Z\",\"unloaddate\":\"2019 - 08 - 08T17: 18:11.411Z\",\"loadqtytot\":80.00,\"unloadqtytot\":102.00},\"stockStrategy\":null,\"stockval\":1.00,\"inpicklistqty\":0.00,\"stockvalTotal\":1.00,\"inpicklistqtyTotal\":null,\"fiscalWarehouseCode\":\"84911\",\"locpickfreq\":\"0\",\"pickingManagementFlag\":\"P\",\"locatncapty\":0.00,\"warehouseLocationManagementType\":\"0\",\"physical\":true},{\"concurrencyVersion\":42,\"tenantId\":\"PLV\",\"creator\":\"PBMPS07\",\"instantCreated\":\"1900 - 01 - 01T00: 01:01.000Z\",\"lastModifier\":\"gorecele\",\"instantChanged\":\"2019 - 08 - 08T17: 18:11.594Z\",\"id\":234566,\"cell\":\"26022\",\"subCell\":\"004\",\"warehouseLocationCodeComplete\":\"26022004\",\"warehouseLocationItemCode\":\"A00309111\",\"item\":{\"concurrencyVersion\":0,\"tenantId\":null,\"creator\":null,\"instantCreated\":null,\"lastModifier\":null,\"instantChanged\":null,\"id\":\"PLVcom.electrolux.fsds.commons.ddd.valueobject.masterdata.ItemCode@6489ec91\",\"plantCode\":\"PLV\",\"itemCode\":\"A00309111\",\"itemType\":\"50\",\"description\":\"CONTROL PANEL ASSEMBLY        \",\"explosionFlag\":\"1\",\"plannerCode\":\"11012\",\"buyerCode\":\"100A\",\"generalLedgerClassCode\":\"114\",\"managementUnitOfMeasureCode\":\"01\",\"pickListFlag\":\"1\",\"pickListElab\":\"T\",\"pickListPrecDay\":\"1\",\"pickListGroupDay\":\"1\",\"locationPickFrequency\":\"0\",\"locationManagementType\":\"0\",\"stocklocatn\":\"\",\"supplyMethod\":\"T\",\"consumptionPolicy\":\"0000\",\"traceability\":\"N\",\"reqspecattncode\":\"22\",\"drawno\":\"\",\"unitOfMeasure\":null},\"warehouseCode\":\"00084\",\"batchList\":[],\"physicalFlag\":\"Y\",\"reserFlag\":null,\"blockInformation\":{\"blockflag\":\"N\",\"blockReasn\":null,\"blockuser\":null,\"blockdate\":\"1900 - 01 - 01T00: 01:01.000Z\",\"unblockuser\":null,\"unblockdate\":\"0000 - 12 - 30T00: 01:01.000Z\"},\"inventoryInformation\":{\"invntryflag\":\"N\",\"invntryqty\":0.00,\"invntrydate\":\"1900 - 01 - 01T00: 01:01.000Z\",\"invntryuser\":null,\"invntrycnt\":0},\"loadUnloadStockInformation\":{\"loadqty\":0.00,\"unloadqty\":201902.06,\"loaddate\":\"2019 - 08 - 01T16: 45:45.813Z\",\"unloaddate\":\"2019 - 08 - 08T17: 18:11.318Z\",\"loadqtytot\":101.00,\"unloadqtytot\":120.00},\"stockStrategy\":null,\"stockval\":21.00,\"inpicklistqty\":0.00,\"stockvalTotal\":21.00,\"inpicklistqtyTotal\":null,\"fiscalWarehouseCode\":\"84911\",\"locpickfreq\":\"0\",\"pickingManagementFlag\":\"P\",\"locatncapty\":0.00,\"warehouseLocationManagementType\":\"0\",\"physical\":true},{\"concurrencyVersion\":16,\"tenantId\":\"PLV\",\"creator\":\"PBMPS07\",\"instantCreated\":\"1900 - 01 - 01T00: 01:01.000Z\",\"lastModifier\":\"paliwane\",\"instantChanged\":\"2019 - 08 - 01T16: 45:46.448Z\",\"id\":234619,\"cell\":\"26051\",\"subCell\":\"005\",\"warehouseLocationCodeComplete\":\"26051005\",\"warehouseLocationItemCode\":\"A00309111\",\"item\":{\"concurrencyVersion\":0,\"tenantId\":null,\"creator\":null,\"instantCreated\":null,\"lastModifier\":null,\"instantChanged\":null,\"id\":\"PLVcom.electrolux.fsds.commons.ddd.valueobject.masterdata.ItemCode@6489ec91\",\"plantCode\":\"PLV\",\"itemCode\":\"A00309111\",\"itemType\":\"50\",\"description\":\"CONTROL PANEL ASSEMBLY        \",\"explosionFlag\":\"1\",\"plannerCode\":\"11012\",\"buyerCode\":\"100A\",\"generalLedgerClassCode\":\"114\",\"managementUnitOfMeasureCode\":\"01\",\"pickListFlag\":\"1\",\"pickListElab\":\"T\",\"pickListPrecDay\":\"1\",\"pickListGroupDay\":\"1\",\"locationPickFrequency\":\"0\",\"locationManagementType\":\"0\",\"stocklocatn\":\"\",\"supplyMethod\":\"T\",\"consumptionPolicy\":\"0000\",\"traceability\":\"N\",\"reqspecattncode\":\"22\",\"drawno\":\"\",\"unitOfMeasure\":null},\"warehouseCode\":\"00084\",\"batchList\":[],\"physicalFlag\":\"Y\",\"reserFlag\":null,\"blockInformation\":{\"blockflag\":\"N\",\"blockReasn\":null,\"blockuser\":null,\"blockdate\":\"1900 - 01 - 01T00: 01:01.000Z\",\"unblockuser\":null,\"unblockdate\":\"0000 - 12 - 30T00: 01:01.000Z\"},\"inventoryInformation\":{\"invntryflag\":\"N\",\"invntryqty\":0.00,\"invntrydate\":\"1900 - 01 - 01T00: 01:01.000Z\",\"invntryuser\":null,\"invntrycnt\":0},\"loadUnloadStockInformation\":{\"loadqty\":0.00,\"unloadqty\":201906.14,\"loaddate\":\"2019 - 08 - 01T16: 45:45.823Z\",\"unloaddate\":\"2019 - 08 - 01T13: 52:47.968Z\",\"loadqtytot\":82.00,\"unloadqtytot\":104.00},\"stockStrategy\":null,\"stockval\":21.00,\"inpicklistqty\":0.00,\"stockvalTotal\":21.00,\"inpicklistqtyTotal\":null,\"fiscalWarehouseCode\":\"84911\",\"locpickfreq\":\"0\",\"pickingManagementFlag\":\"P\",\"locatncapty\":0.00,\"warehouseLocationManagementType\":\"0\",\"physical\":true},{\"concurrencyVersion\":71,\"tenantId\":\"PLV\",\"creator\":\"PBMPS07\",\"instantCreated\":\"1900 - 01 - 01T00: 01:01.000Z\",\"lastModifier\":\"szkudjak\",\"instantChanged\":\"2019 - 08 - 08T17: 49:11.512Z\",\"id\":234629,\"cell\":\"26052\",\"subCell\":\"007\",\"warehouseLocationCodeComplete\":\"26052007\",\"warehouseLocationItemCode\":\"A00309111\",\"item\":{\"concurrencyVersion\":0,\"tenantId\":null,\"creator\":null,\"instantCreated\":null,\"lastModifier\":null,\"instantChanged\":null,\"id\":\"PLVcom.electrolux.fsds.commons.ddd.valueobject.masterdata.ItemCode@6489ec91\",\"plantCode\":\"PLV\",\"itemCode\":\"A00309111\",\"itemType\":\"50\",\"description\":\"CONTROL PANEL ASSEMBLY        \",\"explosionFlag\":\"1\",\"plannerCode\":\"11012\",\"buyerCode\":\"100A\",\"generalLedgerClassCode\":\"114\",\"managementUnitOfMeasureCode\":\"01\",\"pickListFlag\":\"1\",\"pickListElab\":\"T\",\"pickListPrecDay\":\"1\",\"pickListGroupDay\":\"1\",\"locationPickFrequency\":\"0\",\"locationManagementType\":\"0\",\"stocklocatn\":\"\",\"supplyMethod\":\"T\",\"consumptionPolicy\":\"0000\",\"traceability\":\"N\",\"reqspecattncode\":\"22\",\"drawno\":\"\",\"unitOfMeasure\":null},\"warehouseCode\":\"00084\",\"batchList\":[],\"physicalFlag\":\"Y\",\"reserFlag\":null,\"blockInformation\":{\"blockflag\":\"N\",\"blockReasn\":null,\"blockuser\":null,\"blockdate\":\"1900 - 01 - 01T00: 01:01.000Z\",\"unblockuser\":null,\"unblockdate\":\"0000 - 12 - 30T00: 01:01.000Z\"},\"inventoryInformation\":{\"invntryflag\":\"N\",\"invntryqty\":0.00,\"invntrydate\":\"1900 - 01 - 01T00: 01:01.000Z\",\"invntryuser\":null,\"invntrycnt\":0},\"loadUnloadStockInformation\":{\"loadqty\":0.00,\"unloadqty\":201906.14,\"loaddate\":\"2019 - 08 - 08T17: 49:11.375Z\",\"unloaddate\":\"2019 - 08 - 08T16: 19:14.773Z\",\"loadqtytot\":136.00,\"unloadqtytot\":169.00},\"stockStrategy\":null,\"stockval\":21.00,\"inpicklistqty\":0.00,\"stockvalTotal\":21.00,\"inpicklistqtyTotal\":null,\"fiscalWarehouseCode\":\"84911\",\"locpickfreq\":\"0\",\"pickingManagementFlag\":\"P\",\"locatncapty\":0.00,\"warehouseLocationManagementType\":\"0\",\"physical\":true},{\"concurrencyVersion\":14,\"tenantId\":\"PLV\",\"creator\":\"PBMPS07\",\"instantCreated\":\"1900 - 01 - 01T00: 01:01.000Z\",\"lastModifier\":\"szkudjak\",\"instantChanged\":\"2019 - 08 - 08T17: 49:11.512Z\",\"id\":234637,\"cell\":\"26061\",\"subCell\":\"003\",\"warehouseLocationCodeComplete\":\"26061003\",\"warehouseLocationItemCode\":\"A00309111\",\"item\":{\"concurrencyVersion\":0,\"tenantId\":null,\"creator\":null,\"instantCreated\":null,\"lastModifier\":null,\"instantChanged\":null,\"id\":\"PLVcom.electrolux.fsds.commons.ddd.valueobject.masterdata.ItemCode@6489ec91\",\"plantCode\":\"PLV\",\"itemCode\":\"A00309111\",\"itemType\":\"50\",\"description\":\"CONTROL PANEL ASSEMBLY        \",\"explosionFlag\":\"1\",\"plannerCode\":\"11012\",\"buyerCode\":\"100A\",\"generalLedgerClassCode\":\"114\",\"managementUnitOfMeasureCode\":\"01\",\"pickListFlag\":\"1\",\"pickListElab\":\"T\",\"pickListPrecDay\":\"1\",\"pickListGroupDay\":\"1\",\"locationPickFrequency\":\"0\",\"locationManagementType\":\"0\",\"stocklocatn\":\"\",\"supplyMethod\":\"T\",\"consumptionPolicy\":\"0000\",\"traceability\":\"N\",\"reqspecattncode\":\"22\",\"drawno\":\"\",\"unitOfMeasure\":null},\"warehouseCode\":\"00084\",\"batchList\":[],\"physicalFlag\":\"Y\",\"reserFlag\":null,\"blockInformation\":{\"blockflag\":\"N\",\"blockReasn\":null,\"blockuser\":null,\"blockdate\":\"1900 - 01 - 01T00: 01:01.000Z\",\"unblockuser\":null,\"unblockdate\":\"0000 - 12 - 30T00: 01:01.000Z\"},\"inventoryInformation\":{\"invntryflag\":\"N\",\"invntryqty\":0.00,\"invntrydate\":\"1900 - 01 - 01T00: 01:01.000Z\",\"invntryuser\":null,\"invntrycnt\":0},\"loadUnloadStockInformation\":{\"loadqty\":0.00,\"unloadqty\":201906.14,\"loaddate\":\"2019 - 08 - 08T17: 49:11.377Z\",\"unloaddate\":\"2019 - 08 - 08T16: 18:49.246Z\",\"loadqtytot\":77.00,\"unloadqtytot\":106.00},\"stockStrategy\":null,\"stockval\":21.00,\"inpicklistqty\":0.00,\"stockvalTotal\":21.00,\"inpicklistqtyTotal\":null,\"fiscalWarehouseCode\":\"84911\",\"locpickfreq\":\"0\",\"pickingManagementFlag\":\"P\",\"locatncapty\":0.00,\"warehouseLocationManagementType\":\"0\",\"physical\":true}],\"totalPages\":6,\"totalElements\":56,\"last\":false,\"number\":1,\"size\":10,\"numberOfElements\":10,\"sort\":null,\"first\":false}";
            return data;
        }
        public static List<ApiLocation> ParseFSDSItemLocationsData(string jsonData)
        {
            var parsed = JObject.Parse(jsonData);
            var content = parsed["content"];
            var childrenTokens = content.Children();

            List<ApiLocation> apiLocations = new List<ApiLocation>();

            foreach (var child in childrenTokens)
            {
                ApiLocation apiLoc = new ApiLocation()
                {
                    ItemCode = Convert.ToString(((JValue)child["warehouseLocationItemCode"]).Value),
                    LocationCode = Convert.ToString(((JValue)child["warehouseLocationCodeComplete"]).Value),
                    WarehouseCode = Convert.ToString(((JValue)child["fiscalWarehouseCode"]).Value),
                    InstantChanged = Convert.ToDateTime(((JValue)child["instantChanged"]).Value),
                    QtyInBox = Convert.ToInt32(((JValue)child["stockvalTotal"]).Value),
                    QtyReserved = Convert.ToInt32(((JValue)child["inpicklistqty"]).Value),
                };

                apiLoc.RegalNumber = apiLoc.LocationCode.Substring(0,2);
                apiLoc.ColumnNumber = Convert.ToInt32(apiLoc.LocationCode.Substring(2, 2));
                apiLoc.ShelfNumber = Convert.ToInt32(apiLoc.LocationCode.Substring(4, 2));

                apiLocations.Add(apiLoc);
            }

            return apiLocations;
        }
    }

}