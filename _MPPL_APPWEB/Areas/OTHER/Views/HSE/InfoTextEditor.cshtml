
@{
    Layout = null;
}

<div class="row">
    <div class="col-12">
        <div class="formArea shadow">            
            <div class="formInlineGroup">
                <div class="formInlineRow">
                    <label>Treść Informacji:</label>
                </div>
                <div class="formInlineRow">
                    @Html.TextArea("InfoText", "?", 9, 180, new { @class = "form-control", @autocomplete = "off", @style= "max-width: 100%;" })
                </div>
            </div>
            <div style="clear: both;"></div>
        </div>
    </div>
    <div class="col-12">
        <div class="formInlineGroup">
            <div class="formInlineRow">
            </div>
            <div class="formInlineRow">
                <input type="button" class="btn btn-success" value="Zapisz" id="btnSave" />
            </div>
        </div>
    </div>
</div>


<script type="text/javascript">

    $(document).ready(function () {
        var json = new JsonHelper();
        var text = json.GetData("/OTHER/HSE/InfoTextGet", {});
        text.done(function (data) {
            //console.log(data);
            $("#InfoText").val(data);
        });
    });

    $("#btnSave").click(function () {
        
        $("#tbdy").html("")
        var infoText = $("#InfoText").val();
        var json = new JsonHelper();

        var window = $(this).closest(".PopupWindow");
        console.log($(window));

        var update = json.Update("/OTHER/HSE/InfoTextUpdate", { text: infoText });
        update.done(function (data) {
            console.log("Update Done");
            //console.log(data);
            GetText();
            $(window[0]).remove();
        });



    });

</script>