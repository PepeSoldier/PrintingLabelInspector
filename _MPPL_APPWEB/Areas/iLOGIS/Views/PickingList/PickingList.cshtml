@model MDL_iLOGIS.ComponentWMS.Entities.PickingList
@{
    Layout = null;
}

<style>
    .backcolorGroup {
        background-color: #4c6f74
    }
    #contentView .orderItemCode, #contentView .QtyPlanned {
        font-size: 24px;
        line-height: 28px;
    }
</style>

<div class="h-100 d-flex flex-column" id="contentView" data-pickerId="@ViewBag.PickerId" data-lastPickingListId="@ViewBag.LastPickingListId" data-adminMode="@ViewBag.IsAdminMode">

</div>


<script id="PickingListsBoxTemplate" type="x-tmpl-mustache">
    @*Picker's data*@
    {{#IsAdminMode}}
    <div class="row no-gutters justify-content-center pageHeader" style="min-height:60px;max-height:60px;">
        <div class="col-6">
            <div class="row no-gutters">
                <div class="col-12" id="pickersNo">
                    {{TransporterName}} ({{TransporterId}})
                </div>
                <div class="col-12" id="pickerLineConnection">
                    Linie: {{DedicatedResources}}
                </div>
            </div>
        </div>
        <div class="col-3 p-1">
            <div class="row no-gutters">
                <div class="col-12">
                    <button type="button" class="btn btn-block btn-primary" id="multiSelect" style="height: 100%;line-height: 20px;">Zaznacz <br />Wiele</button>
                </div>
            </div>
        </div>
        <div class="col-3 p-1 hidden" id="crtPickingListGroup">
            <div class="row no-gutters">
                <div class="col-12">
                    <button type="button" class="btn btn-block " id="createPickingListGroup" style="height: 100%;line-height: 20px;">Utwórz <br />Grupę</button>
                </div>
            </div>
        </div>
        <div class="col-3 p-1 hidden" id="rmvPickingListGroup">
            <div class="row no-gutters">
                <div class="col-12">
                    <button type="button" class="btn btn-block btn-danger " id="removePickingListGroup" style="height: 100%;line-height: 20px;">Usuń <br />Grupę</button>
                </div>
            </div>
        </div>
    </div>
        {{/IsAdminMode}}
        {{^IsAdminMode}}
    <div class="row no-gutters justify-content-center pageHeader" style="min-height:23px;max-height:23px;">
        <div class="col-7" id="pickersNo">
            {{TransporterName}} ({{TransporterId}})
        </div>
        <div class="col-5" id="pickerLineConnection">
            Linie: {{DedicatedResources}}
        </div>
    </div>
        {{/IsAdminMode}}
    

    @*Header Grid*@
    <div class="row no-gutters justify-content-center gridHeader" style="max-height:40px; min-height: 40px;">
        <div class="col-10">
            <div class="row no-gutters">
                <div class="col-5">NR ZAM.</div>
                <div class="col-5">DATA</div>
                <div class="col-2">CZAS</div>
            </div>
            <div class="row no-gutters">
                <div class="col-5">PNC</div>
                <div class="col-5">LINIA</div>
                <div class="col-2">RESZTA</div>
            </div>
        </div>
        <div class="col-2" style="text-align: right;">
            STATUS
        </div>
    </div>
    @*Grid*@
    <div class="row no-gutters justify-content-center mb-auto flex-grow-1" style="overflow-y:scroll">
        @*<div class="col-12" id="Loading">
            </div>*@

        <div class="col-12" id="OrderRows">
            {{#List}}
            <div class="row no-gutters orderRow {{hidden}}" data-workorderid="{{WorkOrderId}}" data-id="{{PickingListId}}" data-guid="{{Guid}}">
                {{#HasGuid}}
                <div class="backcolorGroup" style="width:3%">

                </div>
                <div style="width:80%">
                    {{/HasGuid}}
                    {{^HasGuid}}
                    <div class="col-10">
                        {{/HasGuid}}
                        <div class="row no-gutters orderRowText">
                            <div class="col-5 WorkOrderNumber">{{WorkOrderNumber}}</div>
                            <div class="col-5 StartDateStr">{{StartDateStr}}</div>
                            <div class="col-2 StartTimeStr textLightOrange ">{{StartTimeStr}}</div>
                        </div>
                        <div class="row no-gutters orderRowText">
                            <div class="col-5 orderItemCode">{{ItemCode}}</div>
                            <div class="col-5 resourceName textBlue">{{ResourceName}}</div>
                            <div class="col-2 QtyPlanned">{{QtyRemain}}</div>
                        </div>
                    </div>
                    <div class="col-2 Status" data-status="{{Status}}">
                        <div class="StatusIcon state{{Status}} {{StateIcon}}">

                        </div>
                    </div>
                </div>
                {{/List}}
            </div>
        </div>
        @*Buttons*@
        <div class="row no-gutters justify-content-center" style="margin-bottom:0px;">
            <div class="col-4">
                <a href="#/iLOGIS/PickingList/TransporterList"><div class="btn btn-default btn-bottom">WRÓĆ</div></a>
            </div>
            <div class="col-4">
                <div class="btn btn-info btn-bottom" id="btnGoToSummary">PODSUM.</div>
            </div>
            {{#IsAdminMode}}
            <div class="col-4">
                <div class="btn btn-success btn-bottom" id="btnCreatePickingListItems">UTWÓRZ PL</div>
            </div>
            {{/IsAdminMode}}
            {{^IsAdminMode}}
            <div class="col-4">
                <div class="btn btn-success btn-bottom" id="btnGoToPickingListItems">REALIZUJ</div>
            </div>
            {{/IsAdminMode}}
        </div>
</script>

@*<script src="~/Areas/iLOGIS/Views/PickingList/PickingList.js"></script>*@
<script type="text/javascript">
    var pickingList = new PickingList();
    $(document).ready(function () {
        //openFullscreen();
        pickingList.Init();
    });

</script>
